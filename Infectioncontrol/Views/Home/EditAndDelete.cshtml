
@{
    ViewBag.Title = "資料處理後台";
}
<script>
    $(document).ready(function () {
        var apiurl = "http://localhost:3533/api/IC";

        const queryString = window.location.search;
        const urlParams = new URLSearchParams(queryString);
        var Datetimenow = urlParams.get('Datetimenow');
        var Workerid = urlParams.get('Workerid');
        var Workername = urlParams.get('Workername');
        var Workerdepartment = urlParams.get('Workerdepartment');
        var Workertemperature = urlParams.get('Workertemperature');
        var Cough = urlParams.get('Cough');
        var Diarrhea = urlParams.get('Diarrhea');

        $('#Workerid').val(Workerid);
        $('#Workername').val(Workername);
        $('#Workerdepartment').val(Workerdepartment);
        $('#Workertemperature').val(Workertemperature);
        $('#Cough').val(Cough);
        $('#Diarrhea').val(Diarrhea);

        //alert(Datetimenow);
        //alert(Workerid);
        //alert(Workername);
        //alert(Workerdepartment);
        //alert(Workertemperature);
        //alert(Cough);
        //alert(Diarrhea);



        function fnEdit() {
            var ans = confirm("確定要修改嗎?");
            if (ans == true) {
                Datetimenow = Datetimenow;
                Workerid = $("#Workerid").val();
                Workertemperature = $("#Workertemperature").val();
                Cough = $("#Cough").val();
                Diarrhea = $("#Diarrhea").val();

                var data = "?Datetimenow=" + Datetimenow +
                    "&Workerid=" + Workerid +
                    "&Workertemperature=" + Workertemperature +
                    "&Cough=" + Cough +
                    "&Diarrhea=" + Diarrhea;
            }

            $.ajax({
                url: apiurl + encodeURI(data),
                type: 'PUT',
                success: function (result) {
                    if (result != 0) {
                        alert("修改成功");
                        var url = "http://localhost:3533/Home/Index";
                        window.location.href = url;
                    }
                    else {
                        alert("修改失敗");
                    }
                }
            })

            
        }

        function fnDelete() {
            var ans = confirm("確定要刪除嗎?");
            if (ans == true) {

                var data = "?Datetimenow=" + Datetimenow +
                    "&Workerid=" + Workerid;
            }

            $.ajax({
                url: apiurl + encodeURI(data),
                type: 'DELETE',
                success: function (result) {
                    if (result != 0) {
                        alert("刪除成功");
                        var url = "http://localhost:3533/Home/Index";
                        window.location.href = url;
                    }
                    else {
                        alert("刪除失敗");
                    }
                }
            })
        }
        $("#btnEdit").on("click", fnEdit);
        $("#btnDelete").on("click", fnDelete);
    });
</script>

@*<div class="panel-warning class">
        <div class="panel-heading"></div>
        <div class="panel-body">
            <div class="form-group">
                <label for="Workerid">員工編號</label>
                <input type="text" class="form-control" id="Workerid" />
            </div>
            <div class="form-group">
                <label for="Workername">員工姓名</label>
                <input type="text" class="form-control" id="Workername" />
            </div>
            <div class="form-group">
                <label for="Workerdepartment">員工部門</label>
                <input type="text" class="form-control" id="Workerdepartment" />
            </div>
            <div class="form-group">
                <label for="Workertemperature">體溫</label>
                <input type="text" class="form-control" id="Workertemperature" />
            </div>
            <div class="form-group">
                <label for="Cough">咳嗽</label>
                <input type="text" class="form-control" id="Cough" />
            </div>
            <div class="form-group">
                <label for="Diarrhea">腹瀉</label>
                <input type="text" class="form-control" id="Diarrhea" />
            </div>
            <input type="button" value="修改" id="btnEdit" class="btn btn-warning" />
            <input type="button" value="刪除" id="btnDelete" class="btn btn-danger" />
        </div>
    </div>*@

<br>
<div class="container">
    <div class="panel-group">
        <div class="panel panel-warning">
            <div class="panel-heading"><h2>員工資料</h2></div>
            <div class="panel-body">
                <div class="form-group">
                    <label for="Workerid">員工編號</label>
                    <input type="text" class="form-control" id="Workerid" />
                </div>
                <div class="form-group">
                    <label for="Workername">員工姓名</label>
                    <input type="text" class="form-control" id="Workername" />
                </div>
                <div class="form-group">
                    <label for="Workerdepartment">員工部門</label>
                    <input type="text" class="form-control" id="Workerdepartment" />
                </div>
                <div class="form-group">
                    <label for="Workertemperature">體溫</label>
                    <input type="text" class="form-control" id="Workertemperature" />
                </div>
                <div class="form-group">
                    <label for="Cough">咳嗽</label>
                    <input type="text" class="form-control" id="Cough" />
                </div>
                <div class="form-group">
                    <label for="Diarrhea">腹瀉</label>
                    <input type="text" class="form-control" id="Diarrhea" />
                </div>
                <input type="button" value="修改" id="btnEdit" class="btn btn-warning" />
                <input type="button" value="刪除" id="btnDelete" class="btn btn-danger" />
            </div>
        </div>
    </div>
</div>
